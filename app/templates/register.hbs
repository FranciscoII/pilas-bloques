<Header/>

<div class="center">
  <PaperForm @onSubmit={{action "doRegister"}} as |form|>
    <img src="imagenes/libros/primer-ciclo.png" />
    <br>
    
    <PaperInput @label="Usuario"
      @value={{ registerData.username }} 
      @onChange={{ action (mut registerData.username) }} 
      @focusOut={{ action "checkUsername" }}
      @required={{ true }} 
      @errorMessages={{ hash required="Este campo es necesario" }} > {{!-- TODO: Abstraer esto --}}
      {{#unless validUsername}}
        {{!-- TODO: Move to <InputErrorMessage> component --}}
        <div class="md-input-messages-animation md-auto-hide" id="ember267-error-messages">
          <div id="error-input-ember267-0" class="paper-input-error ng-enter ng-enter-active md-input-message-animation" style="opacity: 1; margin-top: 0">
            Este nombre de usuario ya existe
          </div>
        </div>
      {{/unless}}
    </PaperInput>


    <br>
    <PaperInput @type="password" @label="Contraseña"
      @value={{ registerData.password }} 
      @onChange={{ action (mut registerData.password) }} 
      @required={{ true }} />

    <br>
    <PaperInput @type="password" @label="Confirmar contraseña"
      @value={{ passwordConfirm }}
      @onChange={{ action (mut passwordConfirm) }} 
      @customValidations={{ passwordConfirmValidation }}
      @required={{ true }} />


    <br>
    <PaperInput @label="Nombre del tutor"
      @value={{ registerData.parentName }} 
      @onChange={{ action (mut registerData.parentName) }} 
      @required={{ true }} />

    <br>
    <PaperInput @label="CUIL del tutor"
      @value={{ registerData.parentCUIL }} 
      @onChange={{ action (mut registerData.parentCUIL) }} 
      @required={{ true }} />

    <br>
    <PaperInput @type="email" @label="Email (opcional)"
      @value={{ registerData.email }} 
      @onChange={{ action (mut registerData.email) }} />


    <p for="avatarURL">
      Elegí tu avatar:
      <PaperInput class="invisible-input" @type="checkbox" @onChange={{ null }} @value={{ registerData.avatarURL }} @required={{ true }} />  
    </p>
    {{#each avatars as |avatar|}}
      <button type="button" class="avatar" onClick={{action (mut registerData.avatarURL) avatar}}>
        <img class={{ if (not (eq registerData.avatarURL avatar)) "gray"}} src={{ concat "imagenes/avatars/" avatar }} />
      </button>
    {{/each}}

    <p for="Terms & Conditions"> Términos y condiciones </p>
    <Textarea @value={{ "Acá van los términos y condiciones" }} disabled={{true}} />
    <br>
    <Link>Ver todos los términos y condiciones</Link>
    <br><br>
    <Input @type={{"checkbox"}} required />
    <span>He leído y acepto los términos y condiciones.</span>

    <Button type="submit" @isDisabled={{not validUsername}}>
      Registrar
    </Button>
  </PaperForm>
</div>